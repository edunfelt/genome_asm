<html>
<head>
    <link rel="Stylesheet" type="text/css" href="../style.css" />
    <title>2020-05-29</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
    <a href="../index.html">Index</a> |
    <a href="../diary/diary.html">Diary</a>
    <hr>
    <div class="content">
    
<div id="2020-05-29"><h1 id="2020-05-29" class="header"><a href="#2020-05-29">2020-05-29</a></h1></div>

<div id="2020-05-29-GenomeGraph connected component method"><h2 id="GenomeGraph connected component method" class="header"><a href="#2020-05-29-GenomeGraph connected component method">GenomeGraph connected component method</a></h2></div>
<p>
Completed the <code>getComponents</code> method today. It uses BFS to visit the contigs in the graph and successively discover the connected components, adding each component to an ArrayList. I still need to finish documenting the code properly, but for now everything works as expected and it is fully useable. It  is possible to check that the code works by adding the main method:
</p>
<pre>
public static void main(String[] args) {
        GenomeGraph graph = new GenomeGraph();
        Contig c1 = new Contig(0, 5);
        Contig c2 = new Contig(1, 10);
        Contig c3 = new Contig(2, 15);
        Contig c4 = new Contig(3, 20);
        Contig c5 = new Contig(4, 25);
        Contig c6 = new Contig(5, 30);
        graph.addContig(c1);
        graph.addContig(c2);
        graph.addContig(c3);
        graph.addContig(c4);
        graph.addContig(c5);
        graph.addContig(c6);

        graph.addOverlap(c1, c2);
        graph.addOverlap(c1, c3);
        graph.addOverlap(c2, c4);
        graph.addOverlap(c5, c6);

        System.out.println("Size: " + graph.getSize());
        
        ArrayList&lt;GenomeGraph&gt; list = graph.getComponents();
        System.out.println("Components: " + list.size());
        System.out.println("Size of component 1: " + list.get(0).getSize());
        System.out.println("Size of component 2: " + list.get(1).getSize());

        for (Contig c : graph) {
            System.out.println(c.getContigId() + " " + c.getLength() + " " + graph.contigDegree(c));
        }
    }
</pre>
<p>
which then prints
</p>
<pre>
Size: 6
Components: 2
Size of component 1: 4
Size of component 2: 2
5 30 1
4 25 1
3 20 1
2 15 1
1 10 2
0 5 2
</pre>
<p>
as expected.
</p>


<div id="2020-05-29-GenomeIO class"><h2 id="GenomeIO class" class="header"><a href="#2020-05-29-GenomeIO class">GenomeIO class</a></h2></div>
<p>
How it works:
</p>
<ul>
<li>
Input: a file with data that has been trimmed using the DataTrim class

<li>
Output: a file in which the first line corresponds to the size of the whole graph, the second line contains the contig degrees, the third line contains the number of connected components and the fourth line contains the sizes of the connected components

</ul>

<p>
The output is supposed to be piped into the python script that prints this data in a human readable form.
</p>

<div id="2020-05-29-DisplayData script"><h2 id="DisplayData script" class="header"><a href="#2020-05-29-DisplayData script">DisplayData script</a></h2></div>
<p>
How it works:
</p>
<ul>
<li>
Input: takes a file name with data, as printed by GenomeIO

<li>
Output: shows two bar plots with the contig degrees and the component sizes, as well as returns a .png file with this image

</ul>

<p>
It might be desirable to also have this image contain other information, such as the mean degree and component size.
</p>

<div id="2020-05-29-Thoughts on DataTrim"><h2 id="Thoughts on DataTrim" class="header"><a href="#2020-05-29-Thoughts on DataTrim">Thoughts on DataTrim</a></h2></div>
<p>
Today I also sat down to look more carefully at the output of DataTrim when ran on my three test files. It then became clear that the graphs the output represent is not exactly the graph that I expected. For example: the third file represents a graph in which contig 0 shares an edge with all the other (remaining) contigs, while I expected it to only share an edge with 1, 2 and 3. This is because of how lines are removed in the original file. First edges are added between 0 and 3-9, and then comes the lines that shows how contigs 4-9 are contained in contig 3, hence they are removed. The desired behavior would be for the program to notice that 3 is also connected to 0 and not only remove the superfluous lines, but also the edges from 0 to these contigs, leaving only the edge between 0 and 3. 
</p>

<p>
After thinking about this, I am not really sure how to proceed and edit DataTrim, since I believe this would require some kind ot ability to "look backwards", which would probably require a lot of memory. Another option that I have thought of as well is the possibility of somehow sorting the file before applying DataTrim, or to remove the lines while simultaneously adding contigs and edges into the GenomeGraph data structure. Ultimately I decided to keep working on the project with the current version of the class, since it does work, although perhaps not as effectively as one would want. Hopefully there will be time to add this functionality later.
</p>

    </div>
</body>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/config/TeX-AMS-MML_HTMLorMML.js"></script>
</html>
